###  Changes

#### 2025-12-27 [21:40]
* **Fix: VMA Address & Code Model**
    - Zmieniono `code-model` w `target.json` z `kernel` na `small`.
    - Rozwizano problem bdnego adresowania (przesunicie o 2MB), wymuszajc poprawne VMA dla sekcji `.text` na poziomie `0x8000`.
* **Optimization: Binary Cleanup**
    - Dodano sekcj `/DISCARD/` w `link.ld` dla `.debug*`, `.comment` i `.eh_frame`.
    - Zastosowano flagi `-j .text -j .rodata -j .data` w `llvm-objcopy`.
    - Wyeliminowano metadane i mieci binarne z pocztku pliku `.bin`, zapewniajc poprawny start kernela.
* **Feature: Multi-color VGA Macro**
    - Rozbudowano makro `vga_print_ext`, wykorzystujc rejestry `RSI` (tekst) oraz `RDX` (kolory).
    - Zastosowano bezpieczn ptl sprawdzajc null-terminator przed pobraniem koloru, zapobiegajc odczytom poza zakresem tablicy.
    - Wprowadzono `inout` dla rejestr贸w w bloku `asm!`, co wyeliminowao konflikty z LLVM.
* **Architecture: Stack Initialization & Global ASM**
    - Zastpiono funkcj `_start` (naked) blokiem `global_asm!`.
    - Zdefiniowano bezpieczny stos o rozmiarze 16 KB w sekcji `.bss`.
    - Ustawiono `RSP` za pomoc `lea rsp, [stack_top]` oraz wyr贸wnano stos do 16 bajt贸w.
    - Umo偶liwiono bezpieczne przekazywanie tablic tymczasowych (lokalnych) bezporednio w argumentach makr.

#####  Benefits of Optimizations
* **Minimalny rozmiar binarki**: Usunicie sekcji debugowych i komentarzy zmniejsza sporo rozmiar pliku `.bin`, co pozwala na szybsze adowanie przez bootloader z ograniczon liczb sektor贸w.
* **Stabilno pamici (Memory Safety)**: Dziki rezerwacji stosu w sekcji `.bss`, mamy pewno, 偶e dane lokalne Rusta nie nadpisz kodu kernela ani wa偶nych struktur danych BIOS/UEFI.
* **Poprawne linkowanie symboli**: Model kodu `small` gwarantuje, 偶e relatywne skoki i adresowanie danych (RIP-relative addressing) dziaaj poprawnie w obrbie pierwszych 2GB pamici RAM.
* **Predictable Execution**: Usunicie mieci z pocztku pliku sprawia, 偶e pod adresem `0x8000` zawsze znajduje si instrukcja wejcia (`_start`), co eliminuje ryzyko pr贸by wykonania przez procesor tekstowych metadanych jako kodu.
* **Feature: Advanced Animated Clear**
    - Zaktualizowano makro `vga_clear_animated!` o obsug dowolnej liczby znak贸w.
    - Wprowadzono automatyczne zawijanie wierszy (word wrap) podczas czyszczenia.
    - Zoptymalizowano ptl op贸藕niajc w ASM, by dopasowywaa tempo animacji do liczby znak贸w.
* **Reduced size from 28KB to 17KB**